<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%233b82f6' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpath d='M12 2L2 7l10 5 10-5-10-5z'%3e%3c/path%3e%3cpath d='M2 17l10 5 10-5'%3e%3c/path%3e%3cpath d='M2 12l10 5 10-5'%3e%3c/path%3e%3c/svg%3e">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bohr Diagram Viewer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
      }
    </script>
    <style>
      @keyframes draw-stroke {
        to {
          stroke-dashoffset: 0;
        }
      }

      @keyframes fade-in {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      .fade-in-anim {
        animation: fade-in 0.6s ease-out forwards;
        opacity: 0;
      }
      
      .shell-draw-anim {
        animation: draw-stroke 1s ease-out forwards;
      }
    </style>
    <!-- React & ReactDOM (UMD) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel for in-browser transpilation -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "react/": "https://aistudiocdn.com/react@^19.2.0/"
  }
}
</script>
</head>
  <body class="bg-gray-100 dark:bg-gray-900 transition-colors duration-300">
    <div id="root"></div>

    <!-- Application Logic Inlined to avoid MIME type issues on GitHub Pages -->
    <script type="text/babel">
        const { useState, useEffect, useCallback } = React;

        // --- Data ---
        const ELEMENTS = [
          { name: 'Hydrogen', symbol: 'H', atomicNumber: 1, shells: [1] },
          { name: 'Helium', symbol: 'He', atomicNumber: 2, shells: [2] },
          { name: 'Lithium', symbol: 'Li', atomicNumber: 3, shells: [2, 1] },
          { name: 'Beryllium', symbol: 'Be', atomicNumber: 4, shells: [2, 2] },
          { name: 'Boron', symbol: 'B', atomicNumber: 5, shells: [2, 3] },
          { name: 'Carbon', symbol: 'C', atomicNumber: 6, shells: [2, 4] },
          { name: 'Nitrogen', symbol: 'N', atomicNumber: 7, shells: [2, 5] },
          { name: 'Oxygen', symbol: 'O', atomicNumber: 8, shells: [2, 6] },
          { name: 'Fluorine', symbol: 'F', atomicNumber: 9, shells: [2, 7] },
          { name: 'Neon', symbol: 'Ne', atomicNumber: 10, shells: [2, 8] },
          { name: 'Sodium', symbol: 'Na', atomicNumber: 11, shells: [2, 8, 1] },
          { name: 'Magnesium', symbol: 'Mg', atomicNumber: 12, shells: [2, 8, 2] },
          { name: 'Aluminium', symbol: 'Al', atomicNumber: 13, shells: [2, 8, 3] },
          { name: 'Silicon', symbol: 'Si', atomicNumber: 14, shells: [2, 8, 4] },
          { name: 'Phosphorus', symbol: 'P', atomicNumber: 15, shells: [2, 8, 5] },
          { name: 'Sulfur', symbol: 'S', atomicNumber: 16, shells: [2, 8, 6] },
          { name: 'Chlorine', symbol: 'Cl', atomicNumber: 17, shells: [2, 8, 7] },
          { name: 'Argon', symbol: 'Ar', atomicNumber: 18, shells: [2, 8, 8] },
          { name: 'Potassium', symbol: 'K', atomicNumber: 19, shells: [2, 8, 8, 1] },
          { name: 'Calcium', symbol: 'Ca', atomicNumber: 20, shells: [2, 8, 8, 2] },
          { name: 'Scandium', symbol: 'Sc', atomicNumber: 21, shells: [2, 8, 9, 2] },
          { name: 'Titanium', symbol: 'Ti', atomicNumber: 22, shells: [2, 8, 10, 2] },
          { name: 'Vanadium', symbol: 'V', atomicNumber: 23, shells: [2, 8, 11, 2] },
          { name: 'Chromium', symbol: 'Cr', atomicNumber: 24, shells: [2, 8, 13, 1] },
          { name: 'Manganese', symbol: 'Mn', atomicNumber: 25, shells: [2, 8, 13, 2] },
          { name: 'Iron', symbol: 'Fe', atomicNumber: 26, shells: [2, 8, 14, 2] },
          { name: 'Cobalt', symbol: 'Co', atomicNumber: 27, shells: [2, 8, 15, 2] },
          { name: 'Nickel', symbol: 'Ni', atomicNumber: 28, shells: [2, 8, 16, 2] },
          { name: 'Copper', symbol: 'Cu', atomicNumber: 29, shells: [2, 8, 18, 1] },
          { name: 'Zinc', symbol: 'Zn', atomicNumber: 30, shells: [2, 8, 18, 2] },
          { name: 'Gallium', symbol: 'Ga', atomicNumber: 31, shells: [2, 8, 18, 3] },
          { name: 'Germanium', symbol: 'Ge', atomicNumber: 32, shells: [2, 8, 18, 4] },
          { name: 'Arsenic', symbol: 'As', atomicNumber: 33, shells: [2, 8, 18, 5] },
          { name: 'Selenium', symbol: 'Se', atomicNumber: 34, shells: [2, 8, 18, 6] },
          { name: 'Bromine', symbol: 'Br', atomicNumber: 35, shells: [2, 8, 18, 7] },
          { name: 'Krypton', symbol: 'Kr', atomicNumber: 36, shells: [2, 8, 18, 8] },
          { name: 'Rubidium', symbol: 'Rb', atomicNumber: 37, shells: [2, 8, 18, 8, 1] },
          { name: 'Strontium', symbol: 'Sr', atomicNumber: 38, shells: [2, 8, 18, 8, 2] },
          { name: 'Yttrium', symbol: 'Y', atomicNumber: 39, shells: [2, 8, 18, 9, 2] },
          { name: 'Zirconium', symbol: 'Zr', atomicNumber: 40, shells: [2, 8, 18, 10, 2] },
          { name: 'Niobium', symbol: 'Nb', atomicNumber: 41, shells: [2, 8, 18, 12, 1] },
          { name: 'Molybdenum', symbol: 'Mo', atomicNumber: 42, shells: [2, 8, 18, 13, 1] },
          { name: 'Technetium', symbol: 'Tc', atomicNumber: 43, shells: [2, 8, 18, 13, 2] },
          { name: 'Ruthenium', symbol: 'Ru', atomicNumber: 44, shells: [2, 8, 18, 15, 1] },
          { name: 'Rhodium', symbol: 'Rh', atomicNumber: 45, shells: [2, 8, 18, 16, 1] },
          { name: 'Palladium', symbol: 'Pd', atomicNumber: 46, shells: [2, 8, 18, 18] },
          { name: 'Silver', symbol: 'Ag', atomicNumber: 47, shells: [2, 8, 18, 18, 1] },
          { name: 'Cadmium', symbol: 'Cd', atomicNumber: 48, shells: [2, 8, 18, 18, 2] },
          { name: 'Indium', symbol: 'In', atomicNumber: 49, shells: [2, 8, 18, 18, 3] },
          { name: 'Tin', symbol: 'Sn', atomicNumber: 50, shells: [2, 8, 18, 18, 4] },
          { name: 'Antimony', symbol: 'Sb', atomicNumber: 51, shells: [2, 8, 18, 18, 5] },
          { name: 'Tellurium', symbol: 'Te', atomicNumber: 52, shells: [2, 8, 18, 18, 6] },
          { name: 'Iodine', symbol: 'I', atomicNumber: 53, shells: [2, 8, 18, 18, 7] },
          { name: 'Xenon', symbol: 'Xe', atomicNumber: 54, shells: [2, 8, 18, 18, 8] },
          { name: 'Caesium', symbol: 'Cs', atomicNumber: 55, shells: [2, 8, 18, 18, 8, 1] },
          { name: 'Barium', symbol: 'Ba', atomicNumber: 56, shells: [2, 8, 18, 18, 8, 2] },
          { name: 'Lanthanum', symbol: 'La', atomicNumber: 57, shells: [2, 8, 18, 18, 9, 2] },
          { name: 'Cerium', symbol: 'Ce', atomicNumber: 58, shells: [2, 8, 18, 19, 9, 2] },
          { name: 'Praseodymium', symbol: 'Pr', atomicNumber: 59, shells: [2, 8, 18, 21, 8, 2] },
          { name: 'Neodymium', symbol: 'Nd', atomicNumber: 60, shells: [2, 8, 18, 22, 8, 2] },
          { name: 'Promethium', symbol: 'Pm', atomicNumber: 61, shells: [2, 8, 18, 23, 8, 2] },
          { name: 'Samarium', symbol: 'Sm', atomicNumber: 62, shells: [2, 8, 18, 24, 8, 2] },
          { name: 'Europium', symbol: 'Eu', atomicNumber: 63, shells: [2, 8, 18, 25, 8, 2] },
          { name: 'Gadolinium', symbol: 'Gd', atomicNumber: 64, shells: [2, 8, 18, 25, 9, 2] },
          { name: 'Terbium', symbol: 'Tb', atomicNumber: 65, shells: [2, 8, 18, 27, 8, 2] },
          { name: 'Dysprosium', symbol: 'Dy', atomicNumber: 66, shells: [2, 8, 18, 28, 8, 2] },
          { name: 'Holmium', symbol: 'Ho', atomicNumber: 67, shells: [2, 8, 18, 29, 8, 2] },
          { name: 'Erbium', symbol: 'Er', atomicNumber: 68, shells: [2, 8, 18, 30, 8, 2] },
          { name: 'Thulium', symbol: 'Tm', atomicNumber: 69, shells: [2, 8, 18, 31, 8, 2] },
          { name: 'Ytterbium', symbol: 'Yb', atomicNumber: 70, shells: [2, 8, 18, 32, 8, 2] },
          { name: 'Lutetium', symbol: 'Lu', atomicNumber: 71, shells: [2, 8, 18, 32, 9, 2] },
          { name: 'Hafnium', symbol: 'Hf', atomicNumber: 72, shells: [2, 8, 18, 32, 10, 2] },
          { name: 'Tantalum', symbol: 'Ta', atomicNumber: 73, shells: [2, 8, 18, 32, 11, 2] },
          { name: 'Tungsten', symbol: 'W', atomicNumber: 74, shells: [2, 8, 18, 32, 12, 2] },
          { name: 'Rhenium', symbol: 'Re', atomicNumber: 75, shells: [2, 8, 18, 32, 13, 2] },
          { name: 'Osmium', symbol: 'Os', atomicNumber: 76, shells: [2, 8, 18, 32, 14, 2] },
          { name: 'Iridium', symbol: 'Ir', atomicNumber: 77, shells: [2, 8, 18, 32, 15, 2] },
          { name: 'Platinum', symbol: 'Pt', atomicNumber: 78, shells: [2, 8, 18, 32, 17, 1] },
          { name: 'Gold', symbol: 'Au', atomicNumber: 79, shells: [2, 8, 18, 32, 18, 1] },
          { name: 'Mercury', symbol: 'Hg', atomicNumber: 80, shells: [2, 8, 18, 32, 18, 2] },
          { name: 'Thallium', symbol: 'Tl', atomicNumber: 81, shells: [2, 8, 18, 32, 18, 3] },
          { name: 'Lead', symbol: 'Pb', atomicNumber: 82, shells: [2, 8, 18, 32, 18, 4] },
          { name: 'Bismuth', symbol: 'Bi', atomicNumber: 83, shells: [2, 8, 18, 32, 18, 5] },
          { name: 'Polonium', symbol: 'Po', atomicNumber: 84, shells: [2, 8, 18, 32, 18, 6] },
          { name: 'Astatine', symbol: 'At', atomicNumber: 85, shells: [2, 8, 18, 32, 18, 7] },
          { name: 'Radon', symbol: 'Rn', atomicNumber: 86, shells: [2, 8, 18, 32, 18, 8] },
          { name: 'Francium', symbol: 'Fr', atomicNumber: 87, shells: [2, 8, 18, 32, 18, 8, 1] },
          { name: 'Radium', symbol: 'Ra', atomicNumber: 88, shells: [2, 8, 18, 32, 18, 8, 2] },
          { name: 'Actinium', symbol: 'Ac', atomicNumber: 89, shells: [2, 8, 18, 32, 18, 9, 2] },
          { name: 'Thorium', symbol: 'Th', atomicNumber: 90, shells: [2, 8, 18, 32, 18, 10, 2] },
          { name: 'Protactinium', symbol: 'Pa', atomicNumber: 91, shells: [2, 8, 18, 32, 20, 9, 2] },
          { name: 'Uranium', symbol: 'U', atomicNumber: 92, shells: [2, 8, 18, 32, 21, 9, 2] },
          { name: 'Neptunium', symbol: 'Np', atomicNumber: 93, shells: [2, 8, 18, 32, 22, 9, 2] },
          { name: 'Plutonium', symbol: 'Pu', atomicNumber: 94, shells: [2, 8, 18, 32, 24, 8, 2] },
          { name: 'Americium', symbol: 'Am', atomicNumber: 95, shells: [2, 8, 18, 32, 25, 8, 2] },
          { name: 'Curium', symbol: 'Cm', atomicNumber: 96, shells: [2, 8, 18, 32, 25, 9, 2] },
          { name: 'Berkelium', symbol: 'Bk', atomicNumber: 97, shells: [2, 8, 18, 32, 27, 8, 2] },
          { name: 'Californium', symbol: 'Cf', atomicNumber: 98, shells: [2, 8, 18, 32, 28, 8, 2] },
          { name: 'Einsteinium', symbol: 'Es', atomicNumber: 99, shells: [2, 8, 18, 32, 29, 8, 2] },
          { name: 'Fermium', symbol: 'Fm', atomicNumber: 100, shells: [2, 8, 18, 32, 30, 8, 2] },
          { name: 'Mendelevium', symbol: 'Md', atomicNumber: 101, shells: [2, 8, 18, 32, 31, 8, 2] },
          { name: 'Nobelium', symbol: 'No', atomicNumber: 102, shells: [2, 8, 18, 32, 32, 8, 2] },
          { name: 'Lawrencium', symbol: 'Lr', atomicNumber: 103, shells: [2, 8, 18, 32, 32, 8, 3] },
          { name: 'Rutherfordium', symbol: 'Rf', atomicNumber: 104, shells: [2, 8, 18, 32, 32, 10, 2] },
          { name: 'Dubnium', symbol: 'Db', atomicNumber: 105, shells: [2, 8, 18, 32, 32, 11, 2] },
          { name: 'Seaborgium', symbol: 'Sg', atomicNumber: 106, shells: [2, 8, 18, 32, 32, 12, 2] },
          { name: 'Bohrium', symbol: 'Bh', atomicNumber: 107, shells: [2, 8, 18, 32, 32, 13, 2] },
          { name: 'Hassium', symbol: 'Hs', atomicNumber: 108, shells: [2, 8, 18, 32, 32, 14, 2] },
          { name: 'Meitnerium', symbol: 'Mt', atomicNumber: 109, shells: [2, 8, 18, 32, 32, 15, 2] },
          { name: 'Darmstadtium', symbol: 'Ds', atomicNumber: 110, shells: [2, 8, 18, 32, 32, 16, 2] },
          { name: 'Roentgenium', symbol: 'Rg', atomicNumber: 111, shells: [2, 8, 18, 32, 32, 17, 2] },
          { name: 'Copernicium', symbol: 'Cn', atomicNumber: 112, shells: [2, 8, 18, 32, 32, 18, 2] },
          { name: 'Nihonium', symbol: 'Nh', atomicNumber: 113, shells: [2, 8, 18, 32, 32, 18, 3] },
          { name: 'Flerovium', symbol: 'Fl', atomicNumber: 114, shells: [2, 8, 18, 32, 32, 18, 4] },
          { name: 'Moscovium', symbol: 'Mc', atomicNumber: 115, shells: [2, 8, 18, 32, 32, 18, 5] },
          { name: 'Livermorium', symbol: 'Lv', atomicNumber: 116, shells: [2, 8, 18, 32, 32, 18, 6] },
          { name: 'Tennessine', symbol: 'Ts', atomicNumber: 117, shells: [2, 8, 18, 32, 32, 18, 7] },
          { name: 'Oganesson', symbol: 'Og', atomicNumber: 118, shells: [2, 8, 18, 32, 32, 18, 8] },
        ];

        // --- Components ---

        const ThemeToggle = ({ theme, toggleTheme }) => {
          return (
            <button
              onClick={toggleTheme}
              className="p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500"
              aria-label={`Switch to ${theme === 'light' ? 'dark' : 'light'} mode`}
            >
              {theme === 'light' ? (
                <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                </svg>
              ) : (
                <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                </svg>
              )}
            </button>
          );
        };

        const ElementSelector = ({ onSearch, error }) => {
          const [query, setQuery] = useState('Hydrogen');

          const handleSubmit = (e) => {
            e.preventDefault();
            onSearch(query);
          };

          return (
            <div className="w-full max-w-md">
              <form onSubmit={handleSubmit} className="flex items-center gap-2 bg-white dark:bg-gray-800 p-2 rounded-lg shadow-md">
                <input
                  type="text"
                  value={query}
                  onChange={(e) => setQuery(e.target.value)}
                  placeholder="Enter name, symbol, or atomic #"
                  className="w-full px-4 py-2 bg-transparent text-gray-900 dark:text-white border-none focus:ring-0 placeholder-gray-500"
                  aria-label="Element search input"
                />
                <button
                  type="submit"
                  className="px-6 py-2 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition-colors"
                >
                  View
                </button>
              </form>
              {error && <p className="mt-2 text-red-500 text-sm text-center">{error}</p>}
            </div>
          );
        };

        const BohrDiagram = ({ element }) => {
          const SIZE = 500;
          const CENTER = SIZE / 2;
          const NUCLEUS_RADIUS = Math.max(30, element.atomicNumber / 3.5);
          const SHELL_SPACING = (CENTER - NUCLEUS_RADIUS - 20) / Math.max(1, element.shells.length);
          const ELECTRON_RADIUS = 5;

          const NUCLEUS_FADE_IN_DELAY = 100;
          const SHELL_DRAW_DURATION = 800;
          const SHELL_DRAW_STAGGER = 250;
          const ELECTRON_FADE_DELAY_OFFSET = SHELL_DRAW_DURATION - 200; 
          const ELECTRON_FADE_STAGGER = 40;
          const TEXT_FADE_IN_DELAY = NUCLEUS_FADE_IN_DELAY + (element.shells.length * SHELL_DRAW_STAGGER);

          return (
            <div className="w-full max-w-lg aspect-square">
                <svg viewBox={`0 0 ${SIZE} ${SIZE}`} aria-label={`Bohr diagram for ${element.name}`}>
                    {/* Shells */}
                    {element.shells.map((_, i) => {
                        const radius = NUCLEUS_RADIUS + SHELL_SPACING * (i + 1);
                        const circumference = 2 * Math.PI * radius;
                        return (
                            <circle
                                key={`shell-${i}`}
                                cx={CENTER}
                                cy={CENTER}
                                r={radius}
                                fill="none"
                                className="stroke-gray-300 dark:stroke-gray-600 shell-draw-anim"
                                strokeWidth="1"
                                strokeDasharray={circumference}
                                strokeDashoffset={circumference}
                                style={{ animationDelay: `${NUCLEUS_FADE_IN_DELAY + (i * SHELL_DRAW_STAGGER)}ms` }}
                            />
                        );
                    })}

                    {/* Electrons */}
                    {element.shells.map((electronCount, shellIndex) => {
                        const shellRadius = NUCLEUS_RADIUS + SHELL_SPACING * (shellIndex + 1);
                        const electrons = [];
                        const electronAnimationBaseDelay = NUCLEUS_FADE_IN_DELAY + (shellIndex * SHELL_DRAW_STAGGER) + ELECTRON_FADE_DELAY_OFFSET;

                        for (let i = 0; i < electronCount; i++) {
                            const angle = (2 * Math.PI / electronCount) * i;
                            const cx = CENTER + shellRadius * Math.cos(angle);
                            const cy = CENTER + shellRadius * Math.sin(angle);
                            electrons.push(
                                <circle
                                    key={`electron-${shellIndex}-${i}`}
                                    cx={cx}
                                    cy={cy}
                                    r={ELECTRON_RADIUS}
                                    className="fill-blue-500 dark:fill-blue-400 fade-in-anim"
                                    style={{ animationDelay: `${electronAnimationBaseDelay + (i * ELECTRON_FADE_STAGGER)}ms` }}
                                />
                            );
                        }
                        return <g key={`shell-group-${shellIndex}`}>{electrons}</g>;
                    })}

                    {/* Nucleus */}
                     <g className="fade-in-anim" style={{ animationDelay: `${NUCLEUS_FADE_IN_DELAY}ms`}}>
                        <circle
                            cx={CENTER}
                            cy={CENTER}
                            r={NUCLEUS_RADIUS}
                            className="fill-gray-200 dark:fill-gray-700 stroke-gray-400 dark:stroke-gray-500"
                            strokeWidth="2"
                        />
                        <text
                            x={CENTER}
                            y={CENTER}
                            textAnchor="middle"
                            dominantBaseline="central"
                            className="fill-gray-900 dark:fill-gray-100 select-none"
                            style={{ fontSize: Math.max(16, NUCLEUS_RADIUS / 2) }}
                            fontWeight="bold"
                        >
                            {element.symbol}
                        </text>
                        <text
                            x={CENTER}
                            y={CENTER + NUCLEUS_RADIUS * 0.5 + 8}
                            textAnchor="middle"
                            dominantBaseline="central"
                            className="fill-gray-700 dark:fill-gray-300 select-none"
                            style={{ fontSize: Math.max(10, NUCLEUS_RADIUS / 3.5)}}
                        >
                            P: {element.atomicNumber}
                        </text>
                    </g>
                </svg>
                <h2 
                    className="text-center text-3xl font-bold mt-4 text-gray-900 dark:text-white fade-in-anim"
                    style={{ animationDelay: `${TEXT_FADE_IN_DELAY}ms` }}
                >
                    {element.name}
                </h2>
                <p 
                    className="text-center text-md text-gray-600 dark:text-gray-400 mt-1 fade-in-anim"
                    style={{ animationDelay: `${TEXT_FADE_IN_DELAY + 150}ms` }}
                >
                    Shells ({element.shells.length}): {element.shells.join(' - ')}
                </p>
            </div>
          );
        };

        // --- Main App ---

        const App = () => {
          const [theme, setTheme] = useState(() => {
            if (typeof window !== 'undefined' && window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
              return 'dark';
            }
            return 'light';
          });
          
          const [selectedElement, setSelectedElement] = useState(ELEMENTS[0]);
          const [error, setError] = useState(null);

          useEffect(() => {
            const root = window.document.documentElement;
            if (theme === 'dark') {
              root.classList.add('dark');
            } else {
              root.classList.remove('dark');
            }
          }, [theme]);

          const toggleTheme = () => {
            setTheme(prevTheme => (prevTheme === 'light' ? 'dark' : 'light'));
          };

          const findElement = useCallback((query) => {
            setError(null);
            const trimmedQuery = query.trim().toLowerCase();
            
            if (!trimmedQuery) {
                setError("Please enter an element's name, symbol, or atomic number.");
                setSelectedElement(null);
                return;
            }

            const foundElement = ELEMENTS.find(
              (el) =>
                el.name.toLowerCase() === trimmedQuery ||
                el.symbol.toLowerCase() === trimmedQuery ||
                el.atomicNumber.toString() === trimmedQuery
            );

            if (foundElement) {
              setSelectedElement(foundElement);
            } else {
              setError(`Element "${query}" not found. Please check your input.`);
              setSelectedElement(null);
            }
          }, []);

          return (
            <div className="min-h-screen font-sans text-gray-800 dark:text-gray-200 p-4 sm:p-6 lg:p-8 flex flex-col items-center">
              <header className="w-full max-w-4xl flex justify-between items-center mb-6">
                <div className="flex items-center space-x-3">
                    <svg xmlns="http://www.w3.org/2000/svg" className="h-8 w-8 text-blue-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 2L2 7l10 5 10-5-10-5z"></path><path d="M2 17l10 5 10-5"></path><path d="M2 12l10 5 10-5"></path></svg>
                    <h1 className="text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white">Bohr Diagram Viewer</h1>
                </div>
                <ThemeToggle theme={theme} toggleTheme={toggleTheme} />
              </header>
              
              <main className="w-full max-w-4xl flex-grow flex flex-col items-center">
                <ElementSelector onSearch={findElement} error={error} />
                
                <div className="w-full flex-grow flex items-center justify-center p-4 mt-6">
                    {selectedElement ? (
                        <BohrDiagram key={selectedElement.atomicNumber} element={selectedElement} />
                    ) : (
                        <div className="text-center text-gray-500 dark:text-gray-400">
                            <p className="text-lg">Please select an element to view its Bohr diagram.</p>
                        </div>
                    )}
                </div>
              </main>
              
              <footer className="w-full max-w-4xl text-center text-sm text-gray-500 dark:text-gray-400 mt-8 py-4 border-t border-gray-200 dark:border-gray-700">
                <p>Created with React, TypeScript, and Tailwind CSS.</p>
              </footer>
            </div>
          );
        };

        const rootElement = document.getElementById('root');
        const root = ReactDOM.createRoot(rootElement);
        root.render(
          <React.StrictMode>
            <App />
          </React.StrictMode>
        );
    </script>
</body>
</html>